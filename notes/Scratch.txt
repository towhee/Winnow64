// QTreeWidget filters contains list of distinct items in QStandardItemModel dm
// filters top items = dm column names
// filters child items = dm column distinct items
// filterCategoryToDmColumn = QMap<QString, int>  // maps column names to column number in model
//
// Example
//
// FileType                        // name of a column in dm
//     JPG                         // distinct item in FileType column
//     TIF                         // distinct item in FileType column

QTreeWidgetItemIterator it(filters);
while (*it) {
    // count only child items
    if ((*it)->parent()) {
        int col = filters->filterCategoryToDmColumn[(*it)->parent()->text(0)];
        QString searchValue = (*it)->text(1);
        int tot = 0;
        for (int row = 0; row < rowCount(); ++row) {
            if (dm->index(row, col).data().toString() == searchValue) {
                tot++;
            }
        }
        (*it)->setData(3, Qt::EditRole, QString::number(tot));
    }
    ++it;
}
